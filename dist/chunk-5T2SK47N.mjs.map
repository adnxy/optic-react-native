{"version":3,"sources":["../src/metrics/reRenders.ts"],"sourcesContent":["import * as React from 'react';\nimport { useMetricsStore } from '../store/metricsStore';\n\nconst { useEffect, useRef } = React;\n\n/**\n * Hook to monitor and log prop changes for a component.\n * @param componentName Name of the component\n * @param props Component props\n */\nexport function useRenderMonitor<T extends Record<string, any>>(\n  componentName: string,\n  props: T\n) {\n  if (!React) {\n    console.error('[useoptic] React is not available. Make sure React is properly imported.');\n    return;\n  }\n\n  const prevProps = useRef<T | null>(null);\n  const incrementReRender = useMetricsStore((state) => state.incrementReRender);\n\n  useEffect(() => {\n    if (prevProps.current) {\n      const changedProps: Record<string, { from: any; to: any }> = {};\n      for (const key of Object.keys(props)) {\n        if (prevProps.current[key] !== props[key]) {\n          changedProps[key] = {\n            from: prevProps.current[key],\n            to: props[key],\n          };\n        }\n      }\n      if (Object.keys(changedProps).length > 0) {\n        incrementReRender(componentName);\n        console.log(\n          `[useoptic] ${componentName} re-rendered. Changed props:`,\n          changedProps\n        );\n      }\n    }\n    prevProps.current = props;\n  });\n}\n\nlet renderTrackingSetup = false;\n\n/**\n * Sets up global render tracking (one-time log).\n */\nexport function setupRenderTracking() {\n  if (!renderTrackingSetup) {\n    renderTrackingSetup = true;\n    console.log('[useoptic] Re-render tracking enabled');\n  }\n}\n"],"mappings":";;;;;AAAA,YAAY,WAAW;AAGvB,IAAM,EAAE,WAAW,OAAO,IAAI;AAOvB,SAAS,iBACd,eACA,OACA;AACA,MAAI,CAAC,OAAO;AACV,YAAQ,MAAM,0EAA0E;AACxF;AAAA,EACF;AAEA,QAAM,YAAY,OAAiB,IAAI;AACvC,QAAM,oBAAoB,gBAAgB,CAAC,UAAU,MAAM,iBAAiB;AAE5E,YAAU,MAAM;AACd,QAAI,UAAU,SAAS;AACrB,YAAM,eAAuD,CAAC;AAC9D,iBAAW,OAAO,OAAO,KAAK,KAAK,GAAG;AACpC,YAAI,UAAU,QAAQ,GAAG,MAAM,MAAM,GAAG,GAAG;AACzC,uBAAa,GAAG,IAAI;AAAA,YAClB,MAAM,UAAU,QAAQ,GAAG;AAAA,YAC3B,IAAI,MAAM,GAAG;AAAA,UACf;AAAA,QACF;AAAA,MACF;AACA,UAAI,OAAO,KAAK,YAAY,EAAE,SAAS,GAAG;AACxC,0BAAkB,aAAa;AAC/B,gBAAQ;AAAA,UACN,cAAc,aAAa;AAAA,UAC3B;AAAA,QACF;AAAA,MACF;AAAA,IACF;AACA,cAAU,UAAU;AAAA,EACtB,CAAC;AACH;AAEA,IAAI,sBAAsB;AAKnB,SAAS,sBAAsB;AACpC,MAAI,CAAC,qBAAqB;AACxB,0BAAsB;AACtB,YAAQ,IAAI,uCAAuC;AAAA,EACrD;AACF;","names":[]}